@using SACOMaintenance.Blazor.Server.Pages.Dashboard
@using SACOMaintenance.Blazor.Server.Components
@using Microsoft.Extensions.Configuration
@inject IConfiguration _configuration
@inject SACOMaintenance.ViewModel.Interfaces.IDashboardViewModel dashboardViewModel
@using SACOMaintenance.Common.ModelDB


<SquareCheckBox @bind-SelectedItems="selectedlist" Items="testlist" Context="PPE">
    <ItemTemplate>
        @PPE.PPEName
    </ItemTemplate>
</SquareCheckBox>



<div class="container-fluid">
    <div class="row">
        <div class="col">
            <h1>Dashboard for @dashboardViewModel.yearStart</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <RequestsPriorityInfoGroupComponent></RequestsPriorityInfoGroupComponent>
        </div>
    </div>

    <div class="d-none d-sm-block">
        <!-- Hide if on a mobile phone section - start -->
        <div class="row">
            <div class="col-lg-12">
                <RadzenFieldset Text="Request Stats">
                    <div class="row">
                        <RequestPriorityDashboardItem imageLocation="fas fa-door-open fa-5x" color="bg-dark" text="Open"></RequestPriorityDashboardItem>
                        <div class="col-lg-2"><TotalOpenMaintReqs></TotalOpenMaintReqs></div>
                        <div class="col-lg-2"><NewMaintReqs></NewMaintReqs></div>
                        <div class="col-lg-2"><TotalMaintReqCurrentYear></TotalMaintReqCurrentYear></div>
                    </div>
                </RadzenFieldset>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <RadzenFieldset Text="New Unassigned Requests">
                    <div class="row">
                        <div class="col-lg-12"><MaintReqUnassigned></MaintReqUnassigned></div>
                    </div>
                </RadzenFieldset>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <RadzenFieldset Text="Data Graphs">
                    <div class="row">
                        <div class="col-lg-6"><RequestsGraph></RequestsGraph></div>
                        <div class="col-lg-6"><RequestsYearGraphComponent></RequestsYearGraphComponent></div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12"><RequestsMonthYearGraphComponent></RequestsMonthYearGraphComponent></div>
                    </div>
                </RadzenFieldset>
            </div>
        </div>
    </div><!-- Hide if on a mobile phone section - end -->

</div>


@code{
    public List<PPE> testlist { get; set; } = new() ;

    public List<PPE> selectedlist { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        testlist.Add(new PPE { Id = 1, PPEName = "craig" });
        testlist.Add(new PPE { Id = 1, PPEName = "bob" });
        testlist.Add(new PPE { Id = 1, PPEName = "steve" });
        testlist.Add(new PPE { Id = 1, PPEName = "john" });
    }
}