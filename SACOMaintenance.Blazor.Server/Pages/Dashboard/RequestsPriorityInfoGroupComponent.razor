@using SACOMaintenance.Blazor.Server.Components
@inject SACOMaintenance.ViewModel.Interfaces.IRequestsGraphViewModel viewMod
@using SACOMaintenance.Common.ModelDB;
@using System.Collections.ObjectModel;

<RadzenFieldset Text="Maintenance Request Priority">
    <div class="container-fluid">
        <div class="row">
            <div class="card-group">
                @foreach (var item in prios)
                {
                    <div class="col-lg-3 requestPriorityCentre">
                        <RequestPriorityDashboardItem imageLocation="@item.Icon"
                                                      color="@item.Colour"
                                                      text="@item.Name"
                                                      count="@item.MaintRes.Count"></RequestPriorityDashboardItem>
                    </div>
                }
            </div>           
        </div>
    </div>
</RadzenFieldset>

@code {

    public ObservableCollection<MaintRequestInitiation> regs;
    public ObservableCollection<Priority> prios;

    protected override async Task OnInitializedAsync()
    {
        prios = await viewMod.GetPriorties();
    }

}
