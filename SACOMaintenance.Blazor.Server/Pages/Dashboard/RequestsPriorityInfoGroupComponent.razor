@using SACOMaintenance.Blazor.Server.Components
@inject SACOMaintenance.ViewModel.Interfaces.IRequestsGraphViewModel viewMod
@using SACOMaintenance.Common.ModelDB;
@using System.Collections.ObjectModel;

<RadzenFieldset Text="Maintenance Request Priority">  
    <div class="Priority-Cards">
        @foreach (var item in viewMod.prios)
        {   
            <div class="Priority-Card">
                <RequestPriorityDashboardItem 
                    imageLocation="@item.Icon"
                    color="@item.Colour"
                    text="@item.Name"
                    count="@item.MaintRes.Count">
                    </RequestPriorityDashboardItem>
            </div>
        }
    </div>           

</RadzenFieldset>

@code {

    public ObservableCollection<MaintRequestInitiation> regs = new();
    

    protected override async Task OnInitializedAsync()
    {
        Task.Run(async () => { await viewMod.GetPriorties(); }).Wait();
    }

}
