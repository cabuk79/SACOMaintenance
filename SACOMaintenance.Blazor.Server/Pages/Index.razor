@page "/"
@using SACOMaintenance.Blazor.Server.Pages.Dashboard
@using SACOMaintenance.Blazor.Server.Components
@using SACOMaintenance.Blazor.Server.Pages.ReqInititation
@using Microsoft.AspNetCore.Identity;
@inject UserManager<Common.ModelDB.User> _UserManager
@using Microsoft.AspNetCore.Http;
@using System.Security.Claims
@inject IHttpContextAccessor HttpContextAccessor

<AuthorizeView Roles="Administrators">
    <DashboardManager></DashboardManager>
</AuthorizeView>

<AuthorizeView Roles="General User">
    <DashboardMaintenanceStandard UserId="@userId"></DashboardMaintenanceStandard>
    @*<AddMaintReqDialog></AddMaintReqDialog>*@
    @*<RequestsForUserAll UserId="@userId"></RequestsForUserAll>*@
</AuthorizeView>


@code{

    string userId { get; set; }

    protected async override Task OnInitializedAsync()
    {
        var principal = HttpContextAccessor.HttpContext.User;
        userId = principal.FindFirstValue(ClaimTypes.NameIdentifier);
    }
}