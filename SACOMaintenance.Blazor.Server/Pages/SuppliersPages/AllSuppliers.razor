@page "/suppliers-list"
@inject SACOMaintenance.ViewModel.Interfaces.ISupplierViewModel supplierViewModel
@using SACOMaintenance.Common.ModelDB
@using System.Text.RegularExpressions


<div class="container-fluid">
    <div class="row">
        <div class="col-lg-10">
            <h3>All Suppliers</h3>
        </div>
        <div class="col-lg-2">
            <div class="container">
                <a href="@($"supplier/add")" class="btn btn-primary table-btn">
                    Add New
                    <i class="fa fa-pen"></i>
                </a>
            </div>            
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <RadzenFieldset Text="Suppliers Table" Style="border-color: black">
                <div class="row" style="padding: 10px 5px 0px 5px">
                    <div class="col-lg-12">
                        <RadzenGrid Data="@supplierViewModel.suppliers" Style="border-color: black" AllowColumnResize="true">
                            <Columns>
                                <RadzenGridColumn TItem="Supplier" Property="Id" Title="ID" Width="10px" TextAlign="TextAlign.Center"></RadzenGridColumn>
                                <RadzenGridColumn TItem="Supplier" Property="Name" Title="Name" Width="75px" TextAlign="TextAlign.Center"></RadzenGridColumn>
                                <RadzenGridColumn TItem="Supplier" Property="Comments" Title="Comments" Width="320px" TextAlign="TextAlign.Left">
                                    <Template Context="data">
                                        @if (data.Comments != null)
                                        {
                                            string nonHtmlComment = Regex.Replace(data.Comments, "<.*?>", String.Empty);
                                            @nonHtmlComment
                                        }
                                    </Template>
                                </RadzenGridColumn>
                                <RadzenGridColumn TItem="Supplier" Property="Id" Title="Actions" TextAlign="TextAlign.Center" Width="30px">
                                    <Template Context="data">
                                        <a href="@($"supplier/full/{data.Id}")" class="btn btn-primary table-btn">
                                            Edit
                                            <i class="fa fa-eye"></i>
                                        </a>

                                    </Template>
                                </RadzenGridColumn>
                            </Columns>
                        </RadzenGrid>
                    </div>
                </div>
            </RadzenFieldset>
        </div>
    </div>
</div>





@code {
    protected override async Task OnInitializedAsync()
    {
        supplierViewModel.LoadAllSuppliers();
    }
}