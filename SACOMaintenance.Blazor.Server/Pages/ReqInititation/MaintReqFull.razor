@page "/maint-req/full-add/{MaintReqID}" 
@using SACOMaintenance.Common.ModelDB
@inject SACOMaintenance.ViewModel.Interfaces.IMaintRequestFullViewModel maintReqInitation
@*@inject IMaintRequestInitiation MaintRequestInitiationDataProvider*@


<h3>MaintReqFull</h3>

<EditForm Model="maintReqInitation">
    <div class="form-group-row">
        <label style="font-weight:bold">Details</label>
        <InputTextArea @bind-Value="maintReqInitation.maintReqDetails" class="form-control"></InputTextArea>
    </div>
    <div class="form-group-row">
        <!-- Choose the correct container for the maintenance request -->
        @{ 
            if(maintReqInitation.maintReqAreaId == 31)
            {
                <PlantMaintReqComponent></PlantMaintReqComponent>
                <!--<PlantMaintReqComponent maintReqID="maintReqInitation.maintReqId" PpeTypeName="Plant">--> @*ppeList="maintReq.PPEEquipment">*@<!--</PlantMaintReqComponent>-->
            }
            else
            {
                <GeneralMaintReqComponent maintReqID="maintReqInitation.maintReqId"></GeneralMaintReqComponent>
            }
        }
    </div>
</EditForm>

@code {
    [Parameter]
    public string maintReqID { get; set; }

    //public MaintRequestInitiation maintReq { get; set; } = new MaintRequestInitiation();

    protected override void OnInitialized()
    {
        maintReqInitation.GetMaintReqInitation(Convert.ToInt32(maintReqID));
        //maintReq = MaintRequestInitiationDataProvider.GetSingleRequestInitiation(Convert.ToInt32(maintReqID));
    }
}
