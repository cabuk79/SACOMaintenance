@page "/maint-req/full-add/{MaintReqID}" 
@using SACOMaintenance.Common.ModelDB
@using SACOMaintenance.DataAccess.Interfaces
@inject IMaintRequestInitiation MaintRequestInitiationDataProvider

<h3>MaintReqFull</h3>

<EditForm Model="maintReq">
    <div class="form-group-row">
        <label style="font-weight:bold">Details</label>
        <InputTextArea @bind-Value="maintReq.RequestDetails" class="form-control"></InputTextArea>
    </div>
    <div class="form-group-row">
        <!-- Choose the correct container for the maintenance request -->
        @{ 
            if(maintReq.AreaId == 2)
            {
                <PlantMaintReqComponent maintReqID="maintReq.Id" PpeTypeName="Plant"> @*ppeList="maintReq.PPEEquipment">*@</PlantMaintReqComponent>
            }
            else
            {
                <GeneralMaintReqComponent maintReqID="maintReq.Id"></GeneralMaintReqComponent>
            }
        }
    </div>
</EditForm>

@code {
    [Parameter]
    public string maintReqID { get; set; }

    public MaintRequestInitiation maintReq { get; set; } = new MaintRequestInitiation();

    protected override void OnInitialized()
    {
        maintReq = MaintRequestInitiationDataProvider.GetSingleRequestInitiation(Convert.ToInt32(maintReqID));
    }
}
